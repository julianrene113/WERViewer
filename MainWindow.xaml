<Window
    x:Class="WERViewer.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ctrl="clr-namespace:WERViewer.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:WERViewer"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="MainWindow"
    Width="1000"
    Height="800"
    Activated="Window_Activated"
    Background="#181818"
    Closing="Window_Closing"
    Deactivated="Window_Deactivated"
    Icon="/Assets/logo.ico"
    Loaded="Window_Loaded"
    SizeChanged="Window_SizeChanged"
    WindowStartupLocation="Manual"
    mc:Ignorable="d">

    <Grid Margin="10" Background="{StaticResource MainBackground}">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*" />
            <ColumnDefinition Width="6*" />
        </Grid.ColumnDefinitions>

        <Grid Grid.Column="0">
            <Grid.RowDefinitions>
                <RowDefinition Height="16*" />
                <RowDefinition Height="1*" />
            </Grid.RowDefinitions>
            <!--  List of reports  -->
            <ListView
                Grid.Row="0"
                Background="#242424"
                BorderThickness="0"
                DisplayMemberPath="AppName"
                Foreground="White"
                ItemsSource="{Binding Reports}"
                SelectedItem="{Binding SelectedReport}" />
            <Image
                Grid.Row="0"
                x:Name="imgEmpty"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Width="200"
                Visibility="Hidden"
                Margin="0"
                Source="/Assets/empty.png" />
            <Button
                x:Name="btnRefresh"
                Grid.Row="1"
                Click="Button_Click"
                Content="Refresh"
                FontSize="16"
                Template="{StaticResource ReformedButton}" />
        </Grid>

        <!--  Details  -->
        <ScrollViewer Grid.Column="1" Margin="8">
            <StackPanel Orientation="Vertical">
                <ctrl:Spinner
                    x:Name="spProgress"
                    Width="260"
                    Height="30"
                    Margin="0,-3,0,0"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    BorderThickness="0"
                    ChaseClockwise="True"
                    ChaseMode="4"
                    ChasePulseSize="6"
                    ChasePulseSpeed="2"
                    ChaseRingRadius="0"
                    ChaseTailLength="4"
                    DotBrush="{StaticResource ProgressBrushLinear}"
                    DotCount="12"
                    DotSize="16"
                    ProgressHighlightWidth="2"
                    ProgressIndeterminate="True"
                    ProgressSpacing="15"
                    ProgressSweepSpeed="18"
                    RenderMode="AnimatePositions"
                    RenderShape="Progress"
                    Visibility="Visible"
                    WaveAmplitude="16"
                    WaveDuration="1.1"
                    WindAmplitude="1"
                    WindFrequency="0.5" />
                <TextBlock
                    FontSize="20"
                    FontWeight="Bold"
                    Foreground="Silver"
                    Text="{Binding SelectedReport.AppName}" />
                <TextBlock
                    Margin="0,5"
                    Foreground="White"
                    Text="{Binding SelectedReport.EventType}" />
                <TextBlock
                    Margin="0,5"
                    Foreground="White"
                    Text="{Binding SelectedReport.EventTime}" />
                <TextBlock
                    Margin="0,5"
                    Foreground="White"
                    Text="{Binding SelectedReport.ReportTime}" />
                <TextBlock
                    Margin="0,5"
                    Foreground="White"
                    Text="{Binding SelectedReport.FaultModule}" />
                <TextBlock
                    Margin="0,5"
                    Foreground="White"
                    Text="{Binding SelectedReport.ExceptionCode}" />
                <TextBlock
                    Margin="0,10"
                    FontWeight="Bold"
                    Foreground="SkyBlue"
                    Text="Raw Values:" />
                <ItemsControl ItemsSource="{Binding SelectedReport.RawValues}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock
                                    Width="180"
                                    FontWeight="Bold"
                                    Foreground="Gray"
                                    Text="{Binding Key}" />
                                <TextBlock Foreground="White" Text="{Binding Value}" />
                            </StackPanel>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </StackPanel>
        </ScrollViewer>
    </Grid>

</Window>
